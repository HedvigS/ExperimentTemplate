<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<experiment appNameDisplay="RosselFieldKit" appNameInternal="rosselfieldkit" backgroundColour="#FFFFFF" complementColour0="#EAC3A3" complementColour1="#9D7B5E" complementColour2="#C69E7C" complementColour3="#FFEDDE" complementColour4="#FFFDFB" primaryColour0="#628D8D" primaryColour1="#385E5E" primaryColour2="#4A7777" primaryColour3="#96ADAD" primaryColour4="#D5D8D8" showMenuBar="true" textFontSize="17">
    <metadata>
        <field controlledMessage="Please enter at least three letters." controlledRegex=".'{'3,'}'" postName="workerId" preventServerDuplicates="false" registrationField="Nem blong man/woman we i toktok"/>
    </metadata>
    <presenter displayOrder="1" menuLabel="Welcome" type="menu" self="Welcome" title="Rossel Island FieldKit">
        <menuItem featureText="Instructions" target="Instructions"/>
        <menuItem featureText="Begin" target="Start"/>
    </presenter>
    <presenter back="Instructions" displayOrder="2" menuLabel="Start" next="Edit_User" type="metadata" self="Start" title="Start">
        <existingUserCheck>
            <multipleUsers>
                <plainText featureText="Begin a new interview with a new participant"/>
                <createUserButton featureText="New interview" target="Edit_User"/>
                <addPadding/>
                <plainText featureText="Resume an interview with an existing participant"/>
                <targetButton featureText="Resume interview" target="SelectUser"/>
            </multipleUsers>
            <singleUser>
                <autoNextPresenter/>
            </singleUser>
        </existingUserCheck>
    </presenter>
    <presenter back="Welcome" displayOrder="3" menuLabel="Instructions" type="text" self="Instructions" title="Instructions">
        <htmlText featureText="Show the pictures and interact with the screen.&lt;br/&gt;There are three background images used on different screens to be placed as follows:&lt;br/&gt;/MPI_STIMULI/background.png&lt;br/&gt;/MPI_STIMULI/background1.png&lt;br/&gt;/MPI_STIMULI/background2.png&lt;br/&gt;&lt;br/&gt;The stimuli for task 1 and task 2 are to be placed in the following directories&lt;br/&gt;/MPI_STIMULI/Task_1&lt;br/&gt;/MPI_STIMULI/Task_2&lt;br/&gt;&lt;br/&gt;"/>
        <targetButton featureText="Begin" hotKey="SPACE" target="Start"/>
    </presenter>
    <presenter back="Welcome" displayOrder="4" menuLabel="Infomesen blong man/woman we i toktok" next="Menu" type="metadata" self="Edit_User" title="Infomesen blong man/woman we i toktok">
        <metadataField fieldName="workerId"/>
        <saveMetadataButton featureText="Savem infomesen" sendData="false" networkErrorMessage="Could not contact the server, please check your internet connection and try again.">
            <onError/>
            <onSuccess>
                <autoNextPresenter/>
            </onSuccess>
        </saveMetadataButton>
    </presenter>
    <presenter back="Welcome" displayOrder="5" menuLabel="Menu" type="menu" self="Menu" title="Menu">
        <menuItem featureText="Task 1" target="Task_1"/>
        <menuItem featureText="Task 2" target="Task_2"/>
        <menuItem featureText="SDCardPictureTask" target="SDCardPictureTask"/>
        <menuItem featureText="MPI Stimuli" target="MPI_STIMULIScreen"/>
        <menuItem featureText="Debug Screen" target="DebugScreen"/>
        <menuItem featureText="Instructions" target="Instructions"/>
    </presenter>
    <presenter back="Welcome" displayOrder="6" menuLabel="Select User" next="Menu" type="metadata" self="SelectUser" title="Select User">
        <selectUserMenu/>
    </presenter>
    <presenter back="Menu" displayOrder="7" menuLabel="MPI Stimuli" type="stimulus" self="MPI_STIMULIScreen" title="MPI Stimuli">
        <loadSdCardStimulus eventTag="MPI Stimuli" randomise="true" maxStimuli="1000" repeatCount="1">
            <hasMoreStimulus>
                <startAudioRecorder eventTag="MPI Stimuli" wavFormat="true" filePerStimulus="false"/>
                <startAudioRecorderTag eventTier="1"/>
                <centrePage/>
                <stimulusLabel/>
                <showStimulusProgress/>
                <stimulusImage msToNext="0" maxHeight="80" percentOfPage="80" maxWidth="80">
                    <plainText featureText="the informant talks/says whatever s/he wants"/>
                    <actionButton featureText="next">
                        <endAudioRecorderTag eventTier="1" eventTag="the informant talks/says whatever s/he wants"/>
                        <clearPage/>
                        <nextStimulus eventTag="nextImage" norepeat="true"/>
                    </actionButton>
                </stimulusImage>
            </hasMoreStimulus>
            <endOfStimulus>
                <plainText featureText="Complete"/>
                <targetButton featureText="Menu" target="Menu"/>
            </endOfStimulus>
            <stimuli>
                <tag>MPI_STIMULI</tag>
            </stimuli>
        </loadSdCardStimulus>
    </presenter>
    <presenter back="Menu" displayOrder="8" menuLabel="Task 1" next="Menu" type="stimulus" self="Task_1" title="Task 1">
        <centrePage/>
        <loadStimulus eventTag="Task 1" randomise="true" maxStimuli="1000" repeatCount="1">
            <hasMoreStimulus>
                <startAudioRecorder eventTag="Task 1" wavFormat="true" filePerStimulus="false"/>
                <withMatchingStimulus eventTag="" randomise="true" matchingRegex="([^_]*_)*" maxStimuli="1000" repeatCount="1">
                    <hasMoreStimulus>
                        <clearPage/>
                        <stimulusImage msToNext="0" maxHeight="80" percentOfPage="0" animate="none" maxWidth="80">
                            <addPadding/>
                            <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                <endAudioRecorderTag eventTier="1" eventTag="no background"/>
                                <clearPage/>
                                <backgroundImage msToNext="1" src="background1.png">
                                    <stimulusImage msToNext="0" maxHeight="30" percentOfPage="0" animate="bounce" maxWidth="30">
                                        <addPadding/>
                                        <stimulusAudio msToNext="0"/>
                                        <actionButton featureText="Play Sound">
                                            <stimulusAudio msToNext="0"/>
                                        </actionButton>
                                        <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                            <endAudioRecorderTag eventTier="2" eventTag="bounce and background"/>
                                            <nextMatchingStimulus/>
                                        </actionButton>
                                        <startAudioRecorderTag eventTier="2"/>
                                    </stimulusImage>
                                </backgroundImage>
                            </actionButton>
                            <startAudioRecorderTag eventTier="1"/>
                        </stimulusImage>
                    </hasMoreStimulus>
                    <endOfStimulus>
                        <clearPage/>
                        <backgroundImage msToNext="1" src="background1.png">
                            <matchingStimulusGrid msToNext="0" randomise="true" matchingRegex="([^_]*_)*" columnCount="10" maxStimuli="1000" animate="bounce" maxWidth="30">
                                <responseCorrect>
                                    <endAudioRecorderTag eventTier="4" eventTag="correct group"/>
                                    <nextStimulus eventTag="nextCorrectTask 1" norepeat="true"/>
                                </responseCorrect>
                                <responseIncorrect>
                                    <endAudioRecorderTag eventTier="4" eventTag="incorrect group"/>
                                    <nextStimulus eventTag="nextIncorrectTask 1" norepeat="true"/>
                                </responseIncorrect>
                            </matchingStimulusGrid>
                            <addPadding/>
                            <stimulusAudio msToNext="0"/>
                            <actionButton featureText="Play Sound">
                                <stimulusAudio msToNext="0"/>
                            </actionButton>
                            <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                <endAudioRecorderTag eventTier="4" eventTag="exit group"/>
                                <nextStimulus eventTag="nextStimulusTask 1" norepeat="true"/>
                            </actionButton>
                            <startAudioRecorderTag eventTier="4"/>
                        </backgroundImage>
                    </endOfStimulus>
                </withMatchingStimulus>
            </hasMoreStimulus>
            <endOfStimulus>
                <stopAudioRecorder/>
                <autoNextPresenter/>
            </endOfStimulus>
            <randomGrouping/>
            <stimuli>
                <tag>Task_1</tag>
            </stimuli>
        </loadStimulus>
    </presenter>
    <presenter back="Menu" displayOrder="9" menuLabel="Task 2" next="Menu" type="stimulus" self="Task_2" title="Task 2">
        <centrePage/>
        <loadStimulus eventTag="Task 2" randomise="true" maxStimuli="1000" repeatCount="1">
            <hasMoreStimulus>
                <startAudioRecorder eventTag="Task 2" wavFormat="true" filePerStimulus="false"/>
                <clearPage/>
                <matchingStimulusGrid msToNext="0" randomise="true" matchingRegex="([^_]*_)*" columnCount="10" maxStimuli="1000" animate="none" maxWidth="100">
                    <responseCorrect>
                        <endAudioRecorderTag eventTier="4" eventTag="correct group"/>
                        <nextStimulus eventTag="nextCorrectTask 2" norepeat="true"/>
                    </responseCorrect>
                    <responseIncorrect>
                        <endAudioRecorderTag eventTier="4" eventTag="incorrect group"/>
                        <nextStimulus eventTag="nextIncorrectTask 2" norepeat="true"/>
                    </responseIncorrect>
                </matchingStimulusGrid>
                <addPadding/>
                <stimulusCodeAudio msToNext="0" codeFormat="&lt;code&gt;_question"/>
                <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                    <endAudioRecorderTag eventTier="4" eventTag="exit group"/>
                    <nextStimulus eventTag="nextStimulusTask 2" norepeat="true"/>
                </actionButton>
                <startAudioRecorderTag eventTier="4"/>
            </hasMoreStimulus>
            <endOfStimulus>
                <stopAudioRecorder/>
                <autoNextPresenter/>
            </endOfStimulus>
            <randomGrouping/>
            <stimuli>
                <tag>Task_2</tag>
            </stimuli>
        </loadStimulus>
    </presenter>
    <presenter back="Menu" displayOrder="10" menuLabel="SDCardPictureTask" next="Menu" type="stimulus" self="SDCardPictureTask" title="SDCardPictureTask">
        <centrePage/>
        <loadSdCardStimulus eventTag="SDCardPictureTask" randomise="true" maxStimuli="1000" repeatCount="1">
            <hasMoreStimulus>
                <startAudioRecorder eventTag="SDCardPictureTask" wavFormat="true" filePerStimulus="false"/>
                <withMatchingStimulus eventTag="" randomise="true" matchingRegex="([^_]*_)*" maxStimuli="1000" repeatCount="1">
                    <hasMoreStimulus>
                        <clearPage/>
                        <stimulusImage msToNext="0" maxHeight="80" percentOfPage="0" animate="none" maxWidth="80">
                            <addPadding/>
                            <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                <endAudioRecorderTag eventTier="1" eventTag="no background"/>
                                <clearPage/>
                                <backgroundImage msToNext="1" src="file:///storage/emulated/0/MPI_STIMULI/background.png">
                                    <stimulusImage msToNext="0" maxHeight="30" percentOfPage="0" animate="bounce" maxWidth="30">
                                        <addPadding/>
                                        <stimulusAudio msToNext="0"/>
                                        <actionButton featureText="Play Sound">
                                            <stimulusAudio msToNext="0"/>
                                        </actionButton>
                                        <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                            <endAudioRecorderTag eventTier="2" eventTag="bounce and background"/>
                                            <nextMatchingStimulus/>
                                        </actionButton>
                                        <startAudioRecorderTag eventTier="2"/>
                                    </stimulusImage>
                                </backgroundImage>
                            </actionButton>
                            <startAudioRecorderTag eventTier="1"/>
                        </stimulusImage>
                    </hasMoreStimulus>
                    <endOfStimulus>
                        <clearPage/>
                        <backgroundImage msToNext="1" src="file:///storage/emulated/0/MPI_STIMULI/background.png">
                            <matchingStimulusGrid msToNext="0" randomise="true" matchingRegex="([^_]*_)*" columnCount="10" maxStimuli="1000" animate="bounce" maxWidth="30">
                                <responseCorrect>
                                    <endAudioRecorderTag eventTier="4" eventTag="correct group"/>
                                    <nextStimulus eventTag="nextCorrectSDCardPictureTask" norepeat="true"/>
                                </responseCorrect>
                                <responseIncorrect>
                                    <endAudioRecorderTag eventTier="4" eventTag="incorrect group"/>
                                    <nextStimulus eventTag="nextIncorrectSDCardPictureTask" norepeat="true"/>
                                </responseIncorrect>
                            </matchingStimulusGrid>
                            <addPadding/>
                            <stimulusAudio msToNext="0"/>
                            <actionButton featureText="Play Sound">
                                <stimulusAudio msToNext="0"/>
                            </actionButton>
                            <actionButton featureText="Next" eventTag="Next" hotKey="SPACE">
                                <endAudioRecorderTag eventTier="4" eventTag="exit group"/>
                                <nextStimulus eventTag="nextStimulusSDCardPictureTask" norepeat="true"/>
                            </actionButton>
                            <startAudioRecorderTag eventTier="4"/>
                        </backgroundImage>
                    </endOfStimulus>
                </withMatchingStimulus>
            </hasMoreStimulus>
            <endOfStimulus>
                <stopAudioRecorder/>
                <autoNextPresenter/>
            </endOfStimulus>
            <stimuli>
                <tag>SDCardPictureTask</tag>
            </stimuli>
        </loadSdCardStimulus>
    </presenter>
    <presenter displayOrder="11" menuLabel="Debug Screen" type="debug" self="DebugScreen" title="Debug Screen">
        <versionData/>
        <eraseLocalStorageButton/>
        <localStorageData/>
    </presenter>
    <stimuli>
        <stimulus identifier="MPI_STIMULI" imagePath="MPI_STIMULI" label="MPI_STIMULI" pauseMs="0">
            <tag>MPI_STIMULI</tag>
        </stimulus>
        <stimulus audioPath="1_pig" code="1_pig" identifier="1_pig" imagePath="1_pig.png" pauseMs="0">
            <tag>1_pig_png</tag>
            <tag>Task_1</tag>
        </stimulus>
        <stimulus audioPath="2_bat" code="2_bat" identifier="2_bat" imagePath="2_bat.png" pauseMs="0">
            <tag>2_bat_png</tag>
            <tag>Task_1</tag>
        </stimulus>
        <stimulus audioPath="2_fish" code="2_fish" identifier="2_fish" imagePath="2_fish.png" pauseMs="0">
            <tag>2_fish_png</tag>
            <tag>Task_1</tag>
        </stimulus>
        <stimulus audioPath="1_rat" code="1_rat" identifier="1_rat" imagePath="1_rat.png" pauseMs="0">
            <tag>1_rat_png</tag>
            <tag>Task_1</tag>
        </stimulus>
        <stimulus audioPath="1_pig" code="1_pig" identifier="1_pig" imagePath="1_pig.png" pauseMs="0">
            <tag>1_pig_png</tag>
            <tag>Task_2</tag>
        </stimulus>
        <stimulus audioPath="2_bat" code="2_bat" identifier="2_bat" imagePath="2_bat.png" pauseMs="0">
            <tag>2_bat_png</tag>
            <tag>Task_2</tag>
        </stimulus>
        <stimulus audioPath="2_fish" code="2_fish" identifier="2_fish" imagePath="2_fish.png" pauseMs="0">
            <tag>2_fish_png</tag>
            <tag>Task_2</tag>
        </stimulus>
        <stimulus audioPath="1_rat" code="1_rat" identifier="1_rat" imagePath="1_rat.png" pauseMs="0">
            <tag>1_rat_png</tag>
            <tag>Task_2</tag>
        </stimulus>
        <stimulus audioPath="AnimatedPictures" code="AnimatedPictures" identifier="AnimatedPictures" imagePath="AnimatedPictures" pauseMs="0">
            <tag>AnimatedPictures</tag>
            <tag>SDCardPictureTask</tag>
        </stimulus>
    </stimuli>
</experiment>
