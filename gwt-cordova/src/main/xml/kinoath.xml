<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright (C) 2015 

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<!--
    Created on : Jun 17, 2015, 17:01 PM
    Author     : Peter Withers <peter.withers@mpi.nl>
-->

<!--<experiment appNameDisplay="Test Experiment" appNameInternal="TestExperiment" dataSubmitUrl="http://localhost:8080/frinex/" staticFilesUrl="static/">-->
<experiment appNameDisplay="Test Experiment" appNameInternal="TestExperiment" dataSubmitUrl="http://ems12.mpi.nl:80/frinex-kinoath-0.1.33-pretesting/" staticFilesUrl="static/">
    <metadata>
        <field postName="playername" registrationField="Player name *" controlledRegex=".'{'3,'}'" controlledMessage="Please enter at least three letters." />
        <field postName="age" fieldValues="0-10,11-20,&gt;20" registrationField="Age" />
        <field postName="rabbit" fieldValues="true,false" registrationField="Do you have a rabbit?" controlledRegex="yes" controlledMessage="It is unacceptable to give any answer than 'yes'." />
        <field postName="share" registrationField="Share" fieldValues="true,false" controlledRegex=".'{'1,'}'" controlledMessage="Data will not be shared unless you agree to do so by typing something here."/>
        <field registrationField="Spoken languages" postName="languages" />
        <field postName="workerId" registrationField="Please enter your 'Worker ID'" controlledRegex=".'{'10,'}'" controlledMessage="Your worker ID can be found on the mturk/dashboard." />
        <field postName="nativeLanguage" registrationField="What is your native language" controlledRegex=".'{'2,'}'" controlledMessage="Please enter your native language" />
        <field postName="otherLanguages" registrationField="What other languages do you know" controlledRegex=".'{'2,'}'" controlledMessage="If you do not know any other languages then enter 'none'" />
    </metadata>
    <presenter type="text" menuLabel="Introduction" title="Introduction" back="MainMenu" self="OptionMenu">
        <htmlText fieldName="introductionText1">This is a simple demonstration application produced with the experiment framework currently being developed. This framework is based on the code written for SynQuiz and LingQuest, which are both mobile applications developed within the Language In Interaction project. One of the intended outcomes of these features in this framework is to provide customisable mobile and web based acquisition applications.</htmlText>
        <padding/>
        <htmlText fieldName="introductionText2">The main feature being demonstrated here is the display and generation of simple kin type string diagrams. These diagrams are being produced via a web service that is an extraction from the KinOath application. Currently this is web based only, however if these features are continued then these kinship diagrams would also be produced off line from within mobile applications.</htmlText>
        <padding/>
        <optionButton fieldName="introductionButton1" target="KinDiagram">Simple Kinship Diagram</optionButton>
        <optionButton fieldName="menuLabelSavedKinDiagram" target="SavedKinDiagram"></optionButton>
        <optionButton fieldName="introductionButton3" target="Metadata">Enter Personal Information</optionButton>
    </presenter>
    <presenter type="menu" menuLabel="Menu" self="MainMenu">
        <menuItem fieldName="optionMenuLabel" target="OptionMenu">Introduction</menuItem>
        <menuItem fieldName="aboutScreenMenuLabel" target="AboutPage">About Page</menuItem>
        <!--<menuItem fieldName="menuLabelStrayMessages" target="StrayMessages"/>-->
        <!--<menuItem fieldName="menuLabelPreloadStimulus" target="PreloadStimulus"/>-->
        <!--<menuItem fieldName="menuLabelResultsPage" target="ResultsPage"/>-->
        <!--<menuItem fieldName="menuLabelStimulusPage" target="StimulusPage"/>-->
        <menuItem fieldName="menuLabelMetadata" target="Metadata"/>
        <menuItem fieldName="menuLabelAdminInfo" target="AdminInfo"/>
        <!--<menuItem fieldName="menuLabelStimulusGrid" target="StimulusGrid"/>-->
        <menuItem fieldName="menuLabelKinDiagram" target="KinDiagram"/>
        <menuItem fieldName="menuLabelSavedKinDiagram" target="SavedKinDiagram"/>
        <menuItem fieldName="menuLabelAutoMenu" target="AutoMenu"/>
    </presenter>
    <presenter  back="MainMenu" type="menu" menuLabel="Here Dragons Live (features that are not configured in this application)" title="Auto Generated Menu" self="AutoMenu">
        <allMenuItems/>
    </presenter>
    <presenter type="stimulus" menuLabel="Next (Some Stimulus)" title="Some Stimulus" self="SomeStimulus">
        <htmlText fieldName="stimulusHeading">Some Stimulus</htmlText>
        <showCurrentMs/>
        <stimulusImage width="60" timeToNext="1000">            
            <logTimeStamp eventTag="stimulus1Shown" />
            <showCurrentMs/>
            <stimulusAudio timeToNext="2000">
                <showCurrentMs/>                
                <showStimulusProgress/>   
                <nextStimulusButton condition="true" fieldName="showMore" eventTag="stimulus1Next">Next</nextStimulusButton>
                <popupMessage fieldName="pesterPopup1" condition="stimulusIndexIn(new int[]{9,21,28})">Popup boxes are here to annoy the user.</popupMessage>
                <endOfStimulusButton fieldName="menuLabelStimulusGrid" target="StimulusGrid" eventTag="StimulusGrid">menuLabelStimulusGrid</endOfStimulusButton>
            </stimulusAudio>
        </stimulusImage>    
    </presenter>
    <presenter type="stimulus" menuLabel="Toggle Stimulus" back="MainMenu" self="StimulusGrid">
        <showCurrentMs/>    
        <showStimulusGrid  timeToNext="1000" columnCount="2" imageWidth="100px" eventTag="stimulusGrid" alternativeChoice="New Word">    
            <showCurrentMs/>   
            <responseCorrect timeToNext="1000">
                    <autoNextStimulus condition="true" eventTag="StimulusGridCorrectAuto"/>
                </responseCorrect>
                <responseIncorrect timeToNext="1000">
                    <autoNextStimulus condition="true" eventTag="StimulusGridIncorrectAuto"/>
                </responseIncorrect>    
            <hideStimulusButtons/>        
            <!--<optionButton fieldName="completeLabel" target="ResultsPage">Done</optionButton>-->
        </showStimulusGrid>
        <hideStimulusButtons/>
        <disableStimulusButtons/>
        <showStimulusProgress/>        
        <pause timeToNext="1000">
            <showStimulusButtons/>
            <stimulusAudio timeToNext="3000">
                <showCurrentMs/>
                <enableStimulusButtons/> 
            </stimulusAudio>
        </pause>
    </presenter>
    <presenter type="preload" menuLabel="Preload Stimulus" back="MainMenu" self="PreloadStimulus">
        <htmlText fieldName="preloadingMessage">Preloading image files</htmlText>
        <preloadAllStimuli>
            <logTimeStamp eventTag="preloaded" />
            <optionButton fieldName="menuLabelStimulusPage" target="StimulusPage"/>
        </preloadAllStimuli>
    </presenter>
    <presenter type="metadata" menuLabel="Enter User Info" title="Example User Info" back="MainMenu" self="Metadata" next="SavedKinDiagram">
        <htmlText fieldName="textMetadataScreen1">This is an example of metadata collection from the user. The data entered will be sent and stored on the server, but not used in a diagram.</htmlText>
        <padding/>
        <allMetadataFields/>
        <padding/>
    </presenter>
    <presenter type="text" menuLabel="Administration Information" title="Administration Information" self="AdminInfo" back="MainMenu">
        <htmlText fieldName="textAdminInfo1">The administrative interface can be viewed at &lt;a href=''http://ems12.mpi.nl:80/frinex-kinoath-0.1.33-pretesting''&gt;http://ems12.mpi.nl:80/frinex-kinoath-0.1.33-pretesting&lt;/a&gt;</htmlText>
        <padding/>
        <htmlText fieldName="textAdminInfo2">The demo user name is ''kinoath'' with the password ''F339DJWSfx1''.</htmlText>
        <padding/>
        <htmlText fieldName="textAdminInfo3">Please remember that this is an early alpha demonstration that is not ready to be released, but is provided here to give you a taste of what will be possible.</htmlText>
    </presenter>
    <presenter type="debug" menuLabel="Debug Page" back="MainMenu" self="ResultsPage" next="StimulusPage">
        <eraseLocalStorageButton/>
        <localStorageData/>
    </presenter>
    <presenter type="stimulus" menuLabel="Stimulus Screen" back="MainMenu" self="StimulusPage">
        <htmlText fieldName="stimulusHeading">Some Stimulus</htmlText>
        <showCurrentMs/>
        <stimulusImage width="10" timeToNext="1000">            
            <logTimeStamp eventTag="stimulus1Shown" />
            <showCurrentMs/>
            <stimulusImage width="50" timeToNext="1000">         
                <logTimeStamp eventTag="stimulus2Shown" />
                <showCurrentMs/>
                <stimulusAudio timeToNext="2000">
                    <showCurrentMs/>
                    <optionButton fieldName="showMore" target="StimulusPage">More</optionButton>
                    <optionButton fieldName="completeLabel" target="ResultsPage">Done</optionButton>
                </stimulusAudio>
            </stimulusImage>
        </stimulusImage>
    </presenter>
    <presenter type="kindiagram" menuLabel="Kin Diagram Screen" title="Kin Diagram Screen" back="MainMenu" self="KinDiagram" next="Metadata">
        <kinTypeStringDiagram  timeToNext="1000" kintypestring="EmMD:1:|EmFD:1:|EmS:2:|EmWD:3:|EmD:3:|EmWS:2:|EmZ:1:">
            <htmlText fieldName="kindiagramloadedtext">This screen shows a simple predefined kin type string diagram.</htmlText>
        </kinTypeStringDiagram>
    </presenter>
    <presenter type="kindiagram" menuLabel="Kin Type Entry Screen" title="Kin Type Entry Screen" back="MainMenu" self="SavedKinDiagram">
        <htmlText fieldName="savedKinDiagramText1">This screen shows a freeform kin type string diagram that you create. Use this form to add individuals to this kin type string diagram below.</htmlText>
        <padding/>
        <loadKinTypeStringDiagram  timeToNext="0" diagramName="kinTypeDiagram"></loadKinTypeStringDiagram>
        <addKinTypeGui diagramName="kinTypeDiagram"/>        
        <!--        <optionButton fieldName="completeLabel" target="Metadata">About This Application</optionButton>-->
    </presenter>
    <presenter type="text" menuLabel="About Page" back="MainMenu" title="Application Version" self="AboutPage" next="OptionMenu">
        <!--<Image width="10" image="images/icon.png"/>-->
        <!--<highlightedText fieldName="aboutScreenTextAheading">A Heading</highlightedText>-->
        <!--<htmlText fieldName="aboutScreenTextAbody">A body</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextBheading">&lt;b&gt;B h&lt;/b&gt;</htmlText>-->
        <htmlText fieldName="aboutScreenTextBbody">This is a very simple and quick demonstration of what such an application produced by this framework might look like.</htmlText>
        <padding/>
        <!--<htmlText fieldName="aboutScreenTextCheading">Ch</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextCbody">Cb</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextDheading">Dh</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextDbody">Db</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextEheading">Eh</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextEbody">Eb</htmlText>-->
        <versionData/>
    </presenter>
    <presenter type="text" menuLabel="Video Test Page" back="MainMenu" title="Video Test" self="VideoTestPage">
        <htmlText fieldName="aboutVideoTestPage">http://corpus1.mpi.nl/media-archive/Info/enctest/aspen.mp4</htmlText>
        <padding/>
        <VideoPanel width="70%" poster="images/icon.png" mp4="http://corpus1.mpi.nl/media-archive/Info/enctest/aspen.mp4" />
        <optionButton fieldName="videoWorksLabel" target="VideoWorksPage">Video Works</optionButton>
        <optionButton fieldName="videoFailedLabel" target="VideoFailedPage">Video Failed</optionButton>
    </presenter>
    <presenter type="text" menuLabel="Video Faield Page" back="MainMenu" title="Video Failed" self="VideoFailedPage" next="VideoTestPage">
        <htmlText fieldName="aboutVideoWorksPage">you have send a message indicating the video does not work on your device</htmlText>
    </presenter>
    <presenter type="text" menuLabel="Video Works Page" back="MainMenu" title="Video Works" self="VideoWorksPage" next="VideoTestPage">
        <htmlText fieldName="aboutVideoWorksPage">you have send a message indicating the video works on your device</htmlText>
    </presenter>
</experiment>
