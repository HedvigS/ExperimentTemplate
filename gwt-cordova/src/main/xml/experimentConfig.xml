<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright (C) 2015 

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<!--
    Created on : Jun 17, 2015, 17:01 PM
    Author     : Peter Withers <peter.withers@mpi.nl>
-->

<experiment appNameDisplay="Test Experiment" appNameInternal="TestExperiment" dataSubmitUrl="http://localhost:8080/frinex/" staticFilesUrl="static/">
    <metadata>
        <field postName="playername" registrationField="Player name *" controlledRegex=".'{'3,'}'" controlledMessage="Please enter at least three letters." />
        <field postName="age" fieldValues="0-10,11-20,&gt;20" registrationField="Age" />
        <field postName="rabbit" fieldValues="true,false" registrationField="Do you have a rabbit?" controlledRegex="yes" controlledMessage="It is unacceptable to give any answer than 'yes'." />
        <field postName="share" registrationField="Share" fieldValues="true,false" controlledRegex="true" controlledMessage="Data will not be shared unless you agree to do so."/>
        <field registrationField="Spoken languages" postName="languages" />
        <field postName="workerId" registrationField="Please enter your 'Worker ID'" controlledRegex=".'{'10,'}'" controlledMessage="Your worker ID can be found on the mturk/dashboard." />
        <field postName="nativeLanguage" registrationField="What is your native language" controlledRegex=".'{'2,'}'" controlledMessage="Please enter your native language" />
        <field postName="otherLanguages" registrationField="What other languages do you know" controlledRegex=".'{'2,'}'" controlledMessage="If you do not know any other languages then enter 'none'" />
    </metadata>    
    <presenter type="text" menuLabel="Introduction" title="Introduction" back="MainMenu" self="OptionMenu" next="KinDiagram">
        <htmlText fieldName="introductionText1">This is a simple demonstration application produced with the experiment framework currently being developed.</htmlText>
        <htmlText fieldName="introductionText1a">This framework is based on the code written for SynQuiz and LingQuest.</htmlText>
        <htmlText fieldName="introductionText2">The main feature being demonstrated here is the display and generation of simple kin type string diagrams.</htmlText>
        <htmlText fieldName="introductionText3">These diagrams are being produced via a web service that is an extraction from the KinOath application.</htmlText>
        <htmlText fieldName="introductionText4">When this feature is completed, these kinship diagrams would be produced off line from within mobile app.</htmlText>
        <htmlText fieldName="introductionText5">One of the intended outcomes of these features in this framework is to provide customisable mobile acquisition applications.</htmlText>
        <padding/>
        <optionButton fieldName="introductionButton1" target="KinDiagram">Simple Kinship Diagram</optionButton>
        <optionButton fieldName="introductionButton2" target="SavedKinDiagram">Skip Ahead</optionButton>
        <optionButton fieldName="introductionButton3" target="Metadata">Enter Personal Information</optionButton>
    </presenter>
    <presenter type="menu" menuLabel="Menu" self="MainMenu">
        <menuItem fieldName="optionMenuLabel" target="OptionMenu">Introduction</menuItem>
        <menuItem fieldName="aboutScreenMenuLabel" target="AboutPage">About Page</menuItem>
        <!--<menuItem fieldName="menuLabelStrayMessages" target="StrayMessages"/>-->
        <!--<menuItem fieldName="menuLabelPreloadStimulus" target="PreloadStimulus"/>-->
        <!--<menuItem fieldName="menuLabelResultsPage" target="ResultsPage"/>-->
        <!--<menuItem fieldName="menuLabelStimulusPage" target="StimulusPage"/>-->
        <menuItem fieldName="menuLabelMetadata" target="Metadata"/>
        <!--<menuItem fieldName="menuLabelStimulusGrid" target="StimulusGrid"/>-->
        <menuItem fieldName="menuLabelKinDiagram" target="KinDiagram"/>
        <menuItem fieldName="menuLabelSavedKinDiagram" target="SavedKinDiagram"/>
        <menuItem fieldName="menuLabelAutoMenu" target="AutoMenu"/>
    </presenter>
    <presenter  back="MainMenu" type="menu" menuLabel="Here Dragons Live" title="Auto Generated Menu" self="AutoMenu">
        <allMenuItems/>
    </presenter>
    <presenter type="stimulus" menuLabel="Next (Some Stimulus)" title="Some Stimulus" self="SomeStimulus">
        <htmlText fieldName="stimulusHeading">Some Stimulus</htmlText>
        <showCurrentMs/>
        <stimulusImage width="60" timeToNext="1000">            
            <logTimeStamp eventTag="stimulus1Shown" />
            <showCurrentMs/>
            <stimulusAudio timeToNext="2000">
                <showCurrentMs/>                
                <showStimulusProgress/>   
                <nextStimulusButton condition="true" fieldName="showMore" eventTag="stimulus1Next">Next</nextStimulusButton>
                <popupMessage fieldName="pesterPopup1" condition="stimulusIndexIn(new int[]{9,21,28})">Popup boxes are here to annoy the user.</popupMessage>
                <endOfStimulusButton fieldName="menuLabelStimulusGrid" target="StimulusGrid" eventTag="StimulusGrid">menuLabelStimulusGrid</endOfStimulusButton>
            </stimulusAudio>
        </stimulusImage>    
    </presenter>
    <presenter type="stimulus" menuLabel="Toggle Stimulus" back="MainMenu" self="StimulusGrid">
        <showCurrentMs/>    
        <showStimulusGrid  timeToNext="1000" columnCount="2" imageWidth="100px" eventTag="stimulusGrid" alternativeChoice="New Word">    
            <showCurrentMs/>       
            <hideStimulusButtons/>        
            <optionButton fieldName="completeLabel" target="ResultsPage">Done</optionButton>
        </showStimulusGrid>
        <hideStimulusButtons/>
        <disableStimulusButtons/>
        <showStimulusProgress/>        
        <pause timeToNext="1000">
            <showStimulusButtons/>
            <stimulusAudio timeToNext="3000">
                <showCurrentMs/>
                <enableStimulusButtons/> 
            </stimulusAudio>
        </pause>
    </presenter>
    <presenter type="preload" menuLabel="Preload Stimulus" back="MainMenu" self="PreloadStimulus">
        <htmlText fieldName="preloadingMessage">Preloading image files</htmlText>
        <preloadAllStimuli>
            <logTimeStamp eventTag="preloaded" />
            <optionButton fieldName="menuLabelStimulusPage" target="StimulusPage"/>
        </preloadAllStimuli>
    </presenter>
    <presenter type="metadata" menuLabel="User Info" back="MainMenu" self="Metadata" next="PreloadStimulus">
        <allMetadataFields/>
    </presenter>
    <presenter type="debug" menuLabel="Debug Page" back="MainMenu" self="ResultsPage" next="StimulusPage">
        <eraseLocalStorageButton/>
        <localStorageData/>
    </presenter>
    <presenter type="stimulus" menuLabel="Stimulus Screen" back="MainMenu" self="StimulusPage">
        <htmlText fieldName="stimulusHeading">Some Stimulus</htmlText>
        <showCurrentMs/>
        <stimulusImage width="10" timeToNext="1000">            
            <logTimeStamp eventTag="stimulus1Shown" />
            <showCurrentMs/>
            <stimulusImage width="50" timeToNext="1000">         
                <logTimeStamp eventTag="stimulus2Shown" />
                <showCurrentMs/>
                <stimulusAudio timeToNext="2000">
                    <showCurrentMs/>
                    <optionButton fieldName="showMore" target="StimulusPage">More</optionButton>
                    <optionButton fieldName="completeLabel" target="ResultsPage">Done</optionButton>
                </stimulusAudio>
            </stimulusImage>
        </stimulusImage>
    </presenter>
    <presenter type="kindiagram" menuLabel="Kin Diagram Screen" title="Kin Diagram Screen" back="MainMenu" self="KinDiagram" next="SavedKinDiagram">
        <kinTypeStringDiagram  timeToNext="1000" kintypestring="EmMD:1:|EmFD:1:|EmS:2:|EmWD:3:|EmD:3:|EmWS:2:|EmZ:1:">
            <htmlText fieldName="kindiagramloadedtext">This is a simple predefined kin type string diagram.</htmlText>
        </kinTypeStringDiagram>
    </presenter>
    <presenter type="kindiagram" menuLabel="Kin Type Entry Screen" title="Kin Type Entry Screen" back="MainMenu" self="SavedKinDiagram" next="AboutPage">
         <htmlText fieldName="savedKinDiagramText1">Use this form to add individuals to this kin type string diagram below.</htmlText>
         <padding/>
        <loadKinTypeStringDiagram  timeToNext="0" diagramName="kinTypeDiagram"></loadKinTypeStringDiagram>
        <addKinTypeGui diagramName="kinTypeDiagram"/>
    </presenter>
    <presenter type="text" menuLabel="About Page" back="MainMenu" title="Application Version" self="AboutPage" next="OptionMenu">
        <!--<Image width="10" image="images/icon.png"/>-->
        <!--<highlightedText fieldName="aboutScreenTextAheading">A Heading</highlightedText>-->
        <!--<htmlText fieldName="aboutScreenTextAbody">A body</htmlText>-->
        <!--<padding/>-->
        <!--<htmlText fieldName="aboutScreenTextBheading">&lt;b&gt;B h&lt;/b&gt;</htmlText>-->
        <htmlText fieldName="aboutScreenTextBbody">This is a very simple and quick demonstration of what such an application produced by this framework might look like.</htmlText>
        <!--<htmlText fieldName="aboutScreenTextCheading">Ch</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextCbody">Cb</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextDheading">Dh</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextDbody">Db</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextEheading">Eh</htmlText>-->
        <!--<htmlText fieldName="aboutScreenTextEbody">Eb</htmlText>-->
        <versionData/>
    </presenter>
</experiment>
